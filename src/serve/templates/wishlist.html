{% extends "base.html" %}
{% block main %}

        <main>
            <div class="table-wrapper">

                <nav class="wishlist-nav">
                    <div class="tab">Wishlist</div>
                    <div class="tab">Price graph</div>
                    <div class="tab">Share</div>
                </nav>

                <div id="tab-content-area">
                    <div id="wishlist" class="tab-content">
                        <div id="product-grid">
                            {% for prod in session['wishlist'] %}
                            <div class="product-card">
                                <img src="{{ prod['img'] }}" alt="{{ prod['title'] }}"/>
                                <h4>{{ prod['title'] }}</h4>
                                    <span>{{ prod['price'] }}</span>
                                    <br><br>
                                    <div class="btn-group">

                                        <button class="btn-vist" onclick="javascript:window.open('{{ prod['url'] }}', '_blank');">
                                            visit page
                                        </button>
                                        <button class="btn-compare" id="compare-{{prod["_id"]}}">
                                            compare
                                        </button>

                                        <div class="btn-add-rm" id="wishlist-{{prod["_id"]}}">
                                            <button class="btn-add">
                                                 remove from wishlist
                                            </button>
                                        </div>
                                        <script type=text/javascript>
                                        $(function() {
                                        $('#wishlist-{{prod["_id"]}}').on('click', function(e) {
                                            e.preventDefault()
                                            $.getJSON('/_wishlist_toggle/{{prod["_id"]}}',
                                                function(data) { 
                                                    $("#wishlist-{{prod['_id']}}").html(
                                                        "<button class="+data.newbuttonclass+">"+
                                                            data.newbuttontext+
                                                        "</button>"
                                                    )
                                                }
                                            );
                                            return false;
                                          });
                                        });
                                        </script>

                                    </div>
                                </div>
                                {% endfor %}
                            </div>
                        </div>
                    <div id="price-graph" class="tab-content">price graph test</div>
                    <div id="share" class="tab-content">Share test</div>
                </div>

            </div>
        </main>

{% endblock %}
